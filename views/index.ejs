<% layout("/layouts/boilerplate.ejs") %>

<style>
  .filters {
    display: flex;
    align-items: center;
    text-align: center;
    flex-wrap: wrap;
  }
  .filter {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin-right: 1.2rem;
    margin: 0.5rem;
    padding: 0.5rem 0 0.5rem 0;
    
  }
  .filter i {
    margin-top: 1rem;
    font-size: 1.5rem;
    color:black;
    opacity: 0.7;
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }
  .filter i:hover {
    opacity: 1;
    transform: scale(1.1);
  }
  .switch {
    font-size: 1.1rem;
    margin-right: 0.5rem;
    border: 1px solid black;
    border-radius: 1.5rem;
    height: 2.7rem;
    padding: 0.5rem 1rem 0.5rem 1rem;
    width: 18rem;
    text-align: center;
    
  }
  .form-check-label {
    margin-right: 1rem;
  }
  .form-check-input {
    position:relative;
    right:1rem;
  }
  .Tax-money {
    display: none;
  }
  .card-text {
    display: inline;
  }
  
</style>
<body>
  
  <!-- <div class="filters">
    <div class="filter">
      <div>
       <a href="/listings/filter?category=Treehouse"><i class="fa-solid fa-fire"></i></a> 
      </div>
      <p>Trending</p>
    </div>
    <div class="filter">
      <div>
        <a href="/listings/filter?category=Treehouse"><i class="fa-solid fa-tree-city"></i></a>
      </div>
      <p>Tree house</p>
    </div>
    <div class="filter">
      <div>
        <a href="/listings/filter?category=Beachfront"><i class="fa-solid fa-umbrella-beach"></i></a>
      </div>
      <p>Beachfront</p>
    </div>
    <div class="filter">
      <div>
        <a href="/listings/filter?category=Mountain"><i class="fa-solid fa-mountain-city"></i></a>
      </div>
      <p>Mountain</p>
    </div>
    <div class="filter">
      <div>
        <a href="/listings/filter?category=Urban"><i class="fa-solid fa-chess-rook"></i></a>
      </div>
      <p>Urban</p>
    </div>
    <div class="filter">
      <div>
        <a href="/listings/filter?category=Historic"><i class="fa-solid fa-person-swimming"></i></a>
      </div>
      <p>Historic</p>
    </div>
    <div class="filter">
      <div>
        <a  href="/listings/filter?category=Lakefront"><i class="fa-solid fa-tent"></i></a>
      </div>
      <p>Lakefront</p>
    </div>
    <div class="filter">
      <div>
        <a  href="/listings/filter?category=Luxury"><i class="fa-solid fa-tractor"></i></a>
      </div>
      <p>Luxury</p>
    </div>
    <div class="filter">
      <div>
        <a href="/listings/filter?category=Island"><i class="fa-solid fa-igloo"></i></a>
      </div>
      <p>Island</p>
    </div>
    <div class="filter">
      <div>
       <a href="/listings/filter?category=Ski Resort"><i class="fa-solid fa-person-swimming"></i></a>
      </div>
      <p>Ski Resort</p>
    </div> -->


    <div class="container-fluid py-2 bg-light position-relative">
      <!-- Scroll Buttons -->
      <button class="btn btn-light position-absolute start-0 top-50 translate-middle-y z-3 shadow" id="scrollLeft">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <button class="btn btn-light position-absolute end-0 top-50 translate-middle-y z-3 shadow" id="scrollRight">
        <i class="fa-solid fa-chevron-right"></i>
      </button>
    
      <!-- Filter Panel -->
      <div class="d-flex overflow-hidden px-5">
        <div class="d-flex gap-4 filters" id="filterScroll">
          <!-- Filter Items -->
          <div class="text-center filter">
            <a href="/listings/filter?category=Trending" class="text-decoration-none text-dark">
              <i class="fa-solid fa-fire fs-3"></i>
              <p class="mb-0 small">Trending</p>
            </a>
          </div>
          <div class="text-center filter">
            <a href="/listings/filter?category=Treehouse" class="text-decoration-none text-dark">
              <i class="fa-solid fa-tree-city fs-3"></i>
              <p class="mb-0 small">Tree house</p>
            </a>
          </div>
          <!-- Add all filters here (as you already have) -->
        </div>
      </div>
    </div>
    
    

    <div class="form-check-reverse form-switch ms-auto switch">
      <input
        class="form-check-input"
        type="checkbox"
        role="switch"
        id="switchCheckChecked"
        unchecked
      />
      <label class="form-check-label" for="switchCheckChecked"
        >Display total before taxes</label
      >
    </div>
  </div>
  <h2>All Listings</h2>
  <div class="row row-cols-lg-3 row-cols-md-3 row-col-sm-2">
    <%for(let listing of allListings){%>
    <a href="/listings/<%=listing._id%>" class="show-card">
      <div class="card col listing-card">
        <img
          src="<%=listing.image.url%>"
          class="card-img-top"
          alt="image"
          style="height: 20rem"
        />
        <div class="card-img-overlay">RinkuSahani</div>
        <div class="card-body">
          <h5 class="card-title"><%=listing.title%></h5>
          <div class="card-text">&#8377;<%=listing.price%>/night</div>
          <div class="Tax-money">+18% GST</div>
        </div>
      </div>
    </a>

    <% }%>
  </div>
</body>

<script>
  let switchIcon = document.getElementById("switchCheckChecked");
  switchIcon.addEventListener("click", () => {
    let taxInfo = document.getElementsByClassName("Tax-money");
    for (let info of taxInfo) {
      if (info.style.display != "inline") {
        info.style.display = "inline";
      } else {
        info.style.display = "none";
      }
    }
  });

  const scrollContainer = document.getElementById('filterScroll');
  const scrollLeftBtn = document.getElementById('scrollLeft');
  const scrollRightBtn = document.getElementById('scrollRight');

  scrollLeftBtn.addEventListener('click', () => {
    scrollContainer.scrollBy({ left: -200, behavior: 'smooth' });
  });

  scrollRightBtn.addEventListener('click', () => {
    scrollContainer.scrollBy({ left: 200, behavior: 'smooth' });
  });


</script>
